<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>3D Toy Store</title>
<link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
<style>
body {
  font-family: 'Roboto', sans-serif;
  margin: 0;
  background-color: #f5f5f5;
  color: #333;
}
header {
  text-align: center;
  padding: 25px 15px;
  background-color: #ffffff;
  box-shadow: 0 2px 5px rgba(0,0,0,0.1);
}
header h1 { font-size: 2em; margin:0; font-weight:700; }
header p { font-size: 1em; margin-top:5px; color: #666; }

#products {
  display: grid;
  grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
  gap: 20px;
  padding: 20px;
  max-width: 1200px;
  margin: auto;
}

.product-card {
  background: #fff;
  border-radius: 10px;
  box-shadow: 0 4px 12px rgba(0,0,0,0.08);
  text-align: center;
  padding: 15px;
  transition: transform 0.2s, box-shadow 0.2s;
  position: relative;
}
.product-card:hover {
  transform: translateY(-4px);
  box-shadow: 0 6px 20px rgba(0,0,0,0.12);
}
.product-card img {
  max-width: 100%;
  border-radius: 8px;
}
.product-card h3 { margin: 10px 0 5px; font-size: 1.1em; font-weight:500; color:#333; }
.product-card p { margin: 5px 0; font-size: 0.95em; color: #555; }
.product-card button {
  margin-top: 10px;
  background-color: #007bff;
  color: white;
  border: none;
  padding: 10px 15px;
  border-radius: 6px;
  cursor: pointer;
  font-weight: 500;
  transition: background 0.3s, transform 0.2s;
}
.product-card button:hover {
  background-color: #0056b3;
  transform: scale(1.03);
}

#cart {
  position: fixed;
  top: 20px;
  right: 0;
  width: 280px;
  max-height: 90vh;
  overflow-y: auto;
  background: #fff;
  border-radius: 8px 0 0 8px;
  box-shadow: 0 6px 20px rgba(0,0,0,0.2);
  padding: 15px;
  z-index: 1000;
}
#cart h3 { margin-top:0; font-size:1.2em; text-align:center; color:#007bff; }
#cart ul { list-style: none; padding:0; margin:10px 0 10px 0; }
#cart li { margin-bottom:5px; font-size:0.95em; }
#cart button {
  background-color: #28a745;
  width: 100%;
  border: none;
  padding: 10px;
  border-radius: 6px;
  font-weight: bold;
  color: white;
  cursor: pointer;
  font-size: 1em;
  transition: background 0.3s;
}
#cart button:hover { background-color: #1e7e34; }

.added-msg {
  color: #28a745;
  font-size: 0.85em;
  margin-top: 3px;
  display: none;
}

#contact {
  background: #fff;
  margin-top: 40px;
  padding: 30px 20px;
  text-align: center;
  box-shadow: 0 -2px 10px rgba(0,0,0,0.08);
}
#contact h2 {
  font-size: 1.5em;
  margin-bottom: 10px;
  color: #007bff;
}
#contact p {
  margin: 5px 0;
  font-size: 1em;
  color: #333;
}
#contact a {
  color: #007bff;
  text-decoration: none;
  font-weight: 500;
}
#contact a:hover { text-decoration: underline; }

@media(max-width:600px){
  #cart { width: 200px; top:10px; padding:10px; }
  #products { gap: 15px; }
  .product-card h3 { font-size:1em; }
  .product-card p { font-size:0.85em; }
  .product-card button { font-size:0.9em; padding:8px 10px; }
}
</style>
</head>
<body>
<header>
  <h1>3D Toy Store</h1>
  <p>Professional 3D printed toys & organizers</p>
</header>

<div id="products"></div>

<div id="cart">
  <h3>ðŸ›’ Your Cart</h3>
  <ul id="cart-items"></ul>
  <p>Total: â‚¬<span id="cart-total">0.00</span></p>
  <button id="checkout">Checkout</button>
</div>

<!-- Contact Section -->
<section id="contact">
  <h2>ðŸ“ž Contact Us</h2>
  <p>Phone: <a href="tel:+358405578871">+358 405578871</a></p>
  <p>Email: <a href="mailto:Aron.sopori@gmail.com">Aron.sopori@gmail.com</a></p>
</section>

<script>
document.addEventListener("DOMContentLoaded", function() {
  const BACKEND_URL = 'https://3dtoystore-backend-production-b64c.up.railway.app';

  const products = [
    { id: 1, name: "Key Holder", price: 1.50, img:"" },
    { id: 2, name: "Pen Holder", price: 3.50, img:"" },
    { id: 3, name: "Desk Organizer", price: 3.50, img:"" },
    { id: 4, name: "Phone Stand", price: 2.50, img:"" },
    { id: 5, name: "Cable Clips", price: 1.50, img:"" },
    { id: 6, name: "Clip to Desk Head Stand", price: 4.50, img:"" },
    { id: 7, name: "Pocket Copter", price: 2.00, img:"" },
    { id: 8, name: "BMW Keychain", price: 1.50, img:"" },
    { id: 9, name: "SD & Micro SD Holder", price: 3.50, img:"" },
    { id: 10, name: "Lehtisaari Keychain", price: 5.00, img:"" }
  ];

  let cart = [];
  const productsDiv = document.getElementById('products');
  const cartItems = document.getElementById('cart-items');
  const cartTotal = document.getElementById('cart-total');

  products.forEach(p => {
    const div = document.createElement('div');
    div.className = 'product-card';
    div.innerHTML = `
      ${p.img ? `<img src="${p.img}" alt="${p.name}">` : ''}
      <h3>${p.name}</h3>
      <p>â‚¬${p.price.toFixed(2)}</p>
      <button onclick="addToCart(${p.id})">Add to Cart</button>
      <div class="added-msg" id="msg-${p.id}"></div>
    `;
    productsDiv.appendChild(div);
  });

  window.addToCart = function(productId) {
    const product = products.find(p => p.id === productId);
    cart.push(product);
    updateCart();
    const msg = document.getElementById(`msg-${productId}`);
    msg.textContent = `âœ… ${product.name} added to your cart!`;
    msg.style.display = 'block';
    setTimeout(()=> msg.style.display='none', 2500);
  }

  function updateCart() {
    cartItems.innerHTML = '';
    let total = 0;
    cart.forEach(item => {
      const li = document.createElement('li');
      li.textContent = `${item.name} - â‚¬${item.price.toFixed(2)}`;
      cartItems.appendChild(li);
      total += item.price;
    });
    cartTotal.textContent = total.toFixed(2);
  }

  document.getElementById('checkout').addEventListener('click', async () => {
    if(cart.length===0){ alert("Cart is empty!"); return; }
    try{
      const res = await fetch(`${BACKEND_URL}/create-checkout-session`, {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body:JSON.stringify({items:cart.map(i=>({id:i.id}))})
      });
      const data = await res.json();
      if(data.url) window.location = data.url;
      else alert("Error creating checkout session.");
    }catch(err){console.error(err); alert("Failed to connect to backend.");}
  });

});
</script>
</body>
</html>
